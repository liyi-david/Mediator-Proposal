channel <T:type> Fifo1(A: in T, B: out T) {
    variables { buf : T | NULL init null; }
    transitions {
        _ -> A.reqRead := (buf != null);
        _ -> B.reqWrite := (buf == null);
        
        (A.reqRead && A.reqWrite) -> {
            perform A;
            buf := A;
        }
        (B.reqRead && B.reqWrite) -> {
            B, buf := buf, null;
            perform B;
        } 
    }
}